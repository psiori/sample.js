/*!
 * Sample.js - Sends tracking events to 5d's analytics service. v0.0.1
 * http://www.5dlab.com
 *
 * Copyright (c) 2014-2014, Sascha Lange, Jo√£o Alves
 * Licensed under the MIT License.
 *
 */

!function(a){var b=function(){var a=[],b=!1;return{length:function(){return a.length},isEmpty:function(){return 0===a.length},isSending:function(){return b===!0},add:function(b,c){a[a.length]={event:b,callback:c},this.sendNext()},sendNext:function(){if(!b&&!this.isEmpty()){b=!0;var c=a[0],d=JSON.stringify({p:c.event}),f=this,g=new XMLHttpRequest;g.addEventListener("load",function(){a.shift(),b=!1,f.sendNext()},!0),g.addEventListener("error",function(){b=!1,f.sendNext()}),g.open("POST",e.getEndpoint()),g.setRequestHeader("Content-type","application/json; charset=utf-8"),g.setRequestHeader("Content-length",d.length),g.setRequestHeader("Connection","close"),g.send(d)}}}}(),c="http://localhost:3000/sample/v01/event",d=null,e={setEndpoint:function(a){c=a},getEndpoint:function(){return c},setAppToken:function(a){d=a},track:function(a,c){c.event_name=a,c.app_token=d,b.add(c,function(){})}};a.Sample=e}(window);